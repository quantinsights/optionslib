<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>optionslib: DiscountingCurve.DiscountingCurve Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">optionslib<span id="projectnumber">&#160;1.0.0.0</span>
   </div>
   <div id="projectbrief">A minimalist options pricing library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('class_discounting_curve_1_1_discounting_curve.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_discounting_curve_1_1_discounting_curve-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">DiscountingCurve.DiscountingCurve Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A curve object that stores discount factors.  
 <a href="class_discounting_curve_1_1_discounting_curve.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aae9dabbbb36b105d2a89fee65e4a76b8" id="r_aae9dabbbb36b105d2a89fee65e4a76b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#aae9dabbbb36b105d2a89fee65e4a76b8">__init__</a> (self, np.ndarray <a class="el" href="class_discounting_curve_1_1_discounting_curve.html#ad6b485e419c471c3f207de9bf9963cf3">dates</a>, np.ndarray discountFactors, <a class="el" href="class_discounting_curve_1_1_discounting_interpolation_method.html">DiscountingInterpolationMethod</a> discInterpMethod=<a class="el" href="class_discounting_curve_1_1_discounting_interpolation_method.html#ab396f53c61189bae978aad21381797fc">DiscountingInterpolationMethod.FINANCIAL_CUBIC_SPLINE</a>)</td></tr>
<tr class="separator:aae9dabbbb36b105d2a89fee65e4a76b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc277196d1b980c9301598415a9ffc03" id="r_adc277196d1b980c9301598415a9ffc03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#adc277196d1b980c9301598415a9ffc03">dateSetForPlot</a> (self)</td></tr>
<tr class="separator:adc277196d1b980c9301598415a9ffc03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76f3c03a1da598eed660c09426b0b52e" id="r_a76f3c03a1da598eed660c09426b0b52e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#a76f3c03a1da598eed660c09426b0b52e">plotDFs</a> (self)</td></tr>
<tr class="separator:a76f3c03a1da598eed660c09426b0b52e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aa705ab59a280993818e7baac3bb90b" id="r_a1aa705ab59a280993818e7baac3bb90b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#a1aa705ab59a280993818e7baac3bb90b">plotRates</a> (self)</td></tr>
<tr class="separator:a1aa705ab59a280993818e7baac3bb90b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa64973b5d5518c7c813d8458a01a657b" id="r_aa64973b5d5518c7c813d8458a01a657b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#aa64973b5d5518c7c813d8458a01a657b">plotZeroCouponCurve</a> (self)</td></tr>
<tr class="separator:aa64973b5d5518c7c813d8458a01a657b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9291be9005c72e6b728ad9d318d940f6" id="r_a9291be9005c72e6b728ad9d318d940f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#a9291be9005c72e6b728ad9d318d940f6">plotForwardCurve</a> (self)</td></tr>
<tr class="separator:a9291be9005c72e6b728ad9d318d940f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0386f8281e45d8cf145c8ecb8ac40ec9" id="r_a0386f8281e45d8cf145c8ecb8ac40ec9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#a0386f8281e45d8cf145c8ecb8ac40ec9">discountFactor</a> (self, datetime.date t, datetime.date T)</td></tr>
<tr class="memdesc:a0386f8281e45d8cf145c8ecb8ac40ec9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the discount factor P(t,T) between times t and T.  <br /></td></tr>
<tr class="separator:a0386f8281e45d8cf145c8ecb8ac40ec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab82602e06a3578c101c6863577d49f19" id="r_ab82602e06a3578c101c6863577d49f19"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#ab82602e06a3578c101c6863577d49f19">zero</a> (self, date t, date T)</td></tr>
<tr class="memdesc:ab82602e06a3578c101c6863577d49f19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the annual compounded spot interest rate(zero) Y(t,T) between times t and T.  <br /></td></tr>
<tr class="separator:ab82602e06a3578c101c6863577d49f19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1378f103b8f17eb48cbbe1dfeac9027c" id="r_a1378f103b8f17eb48cbbe1dfeac9027c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#a1378f103b8f17eb48cbbe1dfeac9027c">rate</a> (self, date t, date T)</td></tr>
<tr class="memdesc:a1378f103b8f17eb48cbbe1dfeac9027c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the continuous compounded spot rate R(t,T) between times t and T.  <br /></td></tr>
<tr class="separator:a1378f103b8f17eb48cbbe1dfeac9027c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71e8113eba9987e01cf915e15ea49aca" id="r_a71e8113eba9987e01cf915e15ea49aca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#a71e8113eba9987e01cf915e15ea49aca">forward</a> (self, date t, date T, date S)</td></tr>
<tr class="memdesc:a71e8113eba9987e01cf915e15ea49aca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the simply compounded forward rate F(t;T,S) between times T and S, as observed on t.  <br /></td></tr>
<tr class="separator:a71e8113eba9987e01cf915e15ea49aca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ad6b485e419c471c3f207de9bf9963cf3" id="r_ad6b485e419c471c3f207de9bf9963cf3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#ad6b485e419c471c3f207de9bf9963cf3">dates</a></td></tr>
<tr class="separator:ad6b485e419c471c3f207de9bf9963cf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa372a53a24dfb7cda90e0e221bf7086c" id="r_aa372a53a24dfb7cda90e0e221bf7086c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#aa372a53a24dfb7cda90e0e221bf7086c">dfs</a></td></tr>
<tr class="separator:aa372a53a24dfb7cda90e0e221bf7086c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c9ff5260556a0491e8a9c783842c5d" id="r_a08c9ff5260556a0491e8a9c783842c5d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html#a08c9ff5260556a0491e8a9c783842c5d">DiscountingInterpolationMethod</a></td></tr>
<tr class="separator:a08c9ff5260556a0491e8a9c783842c5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A curve object that stores discount factors. </p>
<p>A <code><a class="el" href="namespace_discounting_curve.html">DiscountingCurve</a></code> object stores a vector of dates and discount factors. There is a need to value all instruments consistently within a single valuation framework. For this we need a risk-free discounting curve which will be a continuous curve (because this is the standard format for all option pricing formulae).</p>
<p>We establish a few important results.</p>
<p>Definition. (Risk-free asset). Consider an asset with the price process \((B_t:t \in [0,T])\) which has the dynamics: $$dB(t) = r(t)B(t)dt$$</p>
<p>where \(r(t)\) is any adapted process. \(B_t\) has no driving Wiener process ( \(dW_t\) term). Such an asset is said to be a risk-free asset. This corresponds to a bank account with (possibly stochastic short interest rate \(r(t)\). Note, that the bank-account is <em>locally risk-free</em>, in the sense that, even if the short rate is a random process, the return \(r(t)\) over an infinitesimal time-period \(dt\) is risk-free (that is deterministic, given the information available at time \(t\)). However, the return of \(B\) over a longer time period is typically stochastic.</p>
<p>Using ODE cookbook methods, we can solve the above equation using separation of variables: $$B(t) = B(0) e^{\int_{0}^{t} r(s) ds}$$</p>
<p>Definition. (Discounting process). The discounting process is defined as \(D(t)=\frac{1}{B(t)}\). It is easy to see that the dynamics of \(D(t)\) is: $$D(t) = -r(t)D(t)dt$$</p>
<p>with solution $$D(0) = D(t)e^{-\int_{0}^{t} r(s) ds}$$</p>
<p>Definition. (Stochastic Discount Factor). The (stochastic) discount factor between two time instants \(t\) and \(T\) is the amount at time \(t\) equal to one unit of currency payable at time \(T\) and is given by: $$D(t,T) = \frac{B(t)}{B(T)} = e^{-\int_{t}^{T} r(s) ds}$$</p>
<p>Definition. (Zero coupon bond). A \(T\) maturity zero-coupon bond is a contract that guarantees its holder the payment of one unit of currency at time \(T\), with no intermediate payments. The contract value at time \(t &lt; T\) is denoted by \(P(t,T)\). Clearly, \(P(T,T) = 1\) for all \(T\).</p>
<p>By the risk neutral pricing formula, the price \(P(t,T)\) of this claim at time \(t\) is given by:</p>
<p>$$\frac{P(t,T)}{B(t)} = \mathbb{E}^{\mathbb{Q}}\left[\frac{1}{B(T)}|\mathcal{F}_t\right]$$</p>
<p>In other words, $$P(t,T) = \mathbb{E}^{\mathbb{Q}}\left[\frac{B(t)}{B(T)}|\mathcal{F}_t\right]= \mathbb{E}^{\mathbb{Q}}\left[D(t,T)|\mathcal{F}_t\right]$$</p>
<p>What is the relationship between the stochastic discount factor \(D(t,T)\) and the zero-coupon bond price \(P(t,T)\) for each pair \((t,T)\)? If the rates \(r\) are deterministic, then \(D\) is deterministic as well and \(D(t,T) = P(t,T)\). However, if the rates are stochastic, \(D(t,T)\) is a random quantity at time \(t\) depending on the future evolution of the rates \(r\) between \(t\) and \(T\).</p>
<p><em>Remark.</em> It is common to refer to the ZCB price \(P(t,T)\) as just the discount factor.</p>
<p>Definition (Continuously compounded spot interest rate). The continuously compounded spot interest rate prevailing at time \(t\) for the maturity \(T\) is denoted by \(R(t,T)\) and is the constant rate at which an investment of \(P(t,T)\) units of currency at time \(t\) accrues continuous to yield a unit amount of currency at maturity \(T\). In formulas: $$ P(t,T)\exp{(R(t,T)\tau(t,T))} = 1$$</p>
<p>or $$ R(t,T) = -\frac{\ln P(t,T)}{\tau(t,T)}$$</p>
<p>Definition (Annually compounded spot interest rate). The annually compounded spot interest rate prevailing at time \(t\) for the maturity \(T\) is denoted by \(Y(t,T)\) and is the constant rate at which investment has to be made to produce an amount of one unit of currency at maturity starting from \(P(t,T)\) units of currency at time \(t\), when reinvesting the obtained amounts once a year. In formulas, $$P(t,T)[1 + Y(t,T)]^{\tau(t,T)} = 1$$</p>
<p>Solving for \(Y(t,T)\), we have:</p>
<p>$$Y(t,T) := \frac{1}{[P(t,T)]^{\frac{1}{\tau(t,T)}}} - 1$$</p>
<p>Thus, zero-coupon bond prices can be expressed in terms of annually compounded rates as:</p>
<p>$$P(t,T) = \frac{1}{[1+Y(t,T)]^{\tau(t,T)}}$$</p>
<p>Definition (Simply-compounded spot interest rate). The simply compounded spot interest rate prevailing at time \(t\) for maturity \(T\) is denoted by \(L(t,T)\) and is the constant rate at which an investment has to be made to produce one unit of currency at maturity, starting from \(P(t,T)\) units of currency at time \(t\), when accruing occurs proportionally to the investment time. In formulas: $$P(t,T)[1 + L(t,T) \times \tau(t,T)]=1$$</p>
<p>Solving for \(L(t,T)\), we have: $$L(t,T) := \frac{1 - P(t,T)}{\tau(t,T)P(t,T)}$$</p>
<p>Reference : <a href="http://www.deriscope.com/docs/Hagan_West_curves_AMF.pdf">http://www.deriscope.com/docs/Hagan_West_curves_AMF.pdf</a> </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aae9dabbbb36b105d2a89fee65e4a76b8" name="aae9dabbbb36b105d2a89fee65e4a76b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae9dabbbb36b105d2a89fee65e4a76b8">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>dates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>discountFactors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_discounting_curve_1_1_discounting_interpolation_method.html">DiscountingInterpolationMethod</a> &#160;</td>
          <td class="paramname"><em>discInterpMethod</em> = <code><a class="el" href="class_discounting_curve_1_1_discounting_interpolation_method.html#ab396f53c61189bae978aad21381797fc">DiscountingInterpolationMethod.FINANCIAL_CUBIC_SPLINE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  117</span>    ):</div>
<div class="line"><span class="lineno">  118</span>        self.dates = dates</div>
<div class="line"><span class="lineno">  119</span>        self.dfs = discountFactors</div>
<div class="line"><span class="lineno">  120</span>        self.DiscountingInterpolationMethod = discInterpMethod</div>
<div class="line"><span class="lineno">  121</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="adc277196d1b980c9301598415a9ffc03" name="adc277196d1b980c9301598415a9ffc03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc277196d1b980c9301598415a9ffc03">&#9670;&#160;</a></span>dateSetForPlot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.dateSetForPlot </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  122</span>    <span class="keyword">def </span>dateSetForPlot(self):</div>
<div class="line"><span class="lineno">  123</span>        anchorDate = self.dates[0]</div>
<div class="line"><span class="lineno">  124</span>        terminalDate = anchorDate + datetime.timedelta(days=365*5)</div>
<div class="line"><span class="lineno">  125</span>        nPoints = (terminalDate - anchorDate).days + 1</div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">return</span> anchorDate, [anchorDate + timedelta(days=i) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(nPoints)], nPoints</div>
<div class="line"><span class="lineno">  127</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0386f8281e45d8cf145c8ecb8ac40ec9" name="a0386f8281e45d8cf145c8ecb8ac40ec9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0386f8281e45d8cf145c8ecb8ac40ec9">&#9670;&#160;</a></span>discountFactor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.discountFactor </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">datetime.date&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">datetime.date&#160;</td>
          <td class="paramname"><em>T</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the discount factor P(t,T) between times t and T. </p>
<div class="fragment"><div class="line"><span class="lineno">  157</span>    <span class="keyword">def </span>discountFactor(self, t: datetime.date, T: datetime.date):</div>
<div class="line"><span class="lineno">  158</span>        anchorDate = self.dates[0]</div>
<div class="line"><span class="lineno">  159</span>        result = 0.0</div>
<div class="line"><span class="lineno">  160</span>        interpolator = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>        <span class="keywordflow">if</span> (self.DiscountingInterpolationMethod == DiscountingInterpolationMethod.LINEAR_ON_DISCOUNT_FACTORS):</div>
<div class="line"><span class="lineno">  163</span>            interpolator = <a class="code hl_class" href="class_linear_interpolator_1_1_linear_interpolator.html">LinearInterpolator.LinearInterpolator</a>(</div>
<div class="line"><span class="lineno">  164</span>                x_values=self.dates,</div>
<div class="line"><span class="lineno">  165</span>                y_values=self.dfs</div>
<div class="line"><span class="lineno">  166</span>            )</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>            <span class="comment"># The discount factor P(0,t)</span></div>
<div class="line"><span class="lineno">  169</span>            df_t = interpolator.value(t)</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>            <span class="comment"># The discount factor P(0,T)</span></div>
<div class="line"><span class="lineno">  172</span>            df_T = interpolator.value(T)</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>            <span class="comment"># We know that, P(0,T) = P(0,t) x P(t,T)</span></div>
<div class="line"><span class="lineno">  175</span>            result = (df_T) / (df_t)</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>        <span class="keywordflow">if</span> (self.DiscountingInterpolationMethod == DiscountingInterpolationMethod.LINEAR_ON_RATES):</div>
<div class="line"><span class="lineno">  178</span>            rates = np.ndarray([self.rate(anchorDate,t) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> len(self.dfs)])</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>            interpolator = <a class="code hl_class" href="class_linear_interpolator_1_1_linear_interpolator.html">LinearInterpolator.LinearInterpolator</a>(</div>
<div class="line"><span class="lineno">  181</span>                x_values=self.dates,</div>
<div class="line"><span class="lineno">  182</span>                y_values=rates</div>
<div class="line"><span class="lineno">  183</span>            )</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>            <span class="comment"># The rate R(0,t)</span></div>
<div class="line"><span class="lineno">  186</span>            r_t = interpolator.value(t)</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>            <span class="comment"># The rate R(0,T)</span></div>
<div class="line"><span class="lineno">  189</span>            r_T = interpolator.value(T)</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>            <span class="comment"># We know that e^(R(t,T)tau(t,T)) = e^(R(0,T)tau(0,T))/e^(R(0,t)tau(0,t))</span></div>
<div class="line"><span class="lineno">  192</span>            tau_t = Actual365.yearFraction(anchorDate, t)</div>
<div class="line"><span class="lineno">  193</span>            tau_T = Actual365.yearFraction(anchorDate, T)</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>            compoundFactor = np.exp(r_T * tau_T) / np.exp(r_t * tau_t)</div>
<div class="line"><span class="lineno">  196</span>            result = 1/compoundFactor</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>        <span class="keywordflow">if</span> (self.DiscountingInterpolationMethod == DiscountingInterpolationMethod.LINEAR_ON_LOG_OF_RATES):</div>
<div class="line"><span class="lineno">  199</span>            logRates = np.ndarray([np.log(self.rate(anchorDate, t)) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> len(self.dfs)])</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>            interpolator = <a class="code hl_class" href="class_linear_interpolator_1_1_linear_interpolator.html">LinearInterpolator.LinearInterpolator</a>(</div>
<div class="line"><span class="lineno">  202</span>                x_values=self.dates,</div>
<div class="line"><span class="lineno">  203</span>                y_values=logRates</div>
<div class="line"><span class="lineno">  204</span>            )</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>            <span class="comment"># log R(0,t)</span></div>
<div class="line"><span class="lineno">  207</span>            logR_t = interpolator.value(t)</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>            <span class="comment"># log R(0,T)</span></div>
<div class="line"><span class="lineno">  210</span>            logR_T = interpolator.value(T)</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>            R_t = np.exp(logR_t)</div>
<div class="line"><span class="lineno">  213</span>            R_T = np.exp(logR_T)</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>            tau_t = Actual365.yearFraction(anchorDate, t)</div>
<div class="line"><span class="lineno">  216</span>            tau_T = Actual365.yearFraction(anchorDate, T)</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>            compoundFactor = np.exp(R_t * tau_T) / np.exp(R_T * tau_t)</div>
<div class="line"><span class="lineno">  219</span>            result = 1 / compoundFactor</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">if</span> (self.DiscountingInterpolationMethod == DiscountingInterpolationMethod.LINEAR_ON_LOG_OF_DISCOUNT_FACTORS):</div>
<div class="line"><span class="lineno">  222</span>            logDfs = np.log(self.dfs)</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>            interpolator = <a class="code hl_class" href="class_linear_interpolator_1_1_linear_interpolator.html">LinearInterpolator.LinearInterpolator</a>(</div>
<div class="line"><span class="lineno">  225</span>                x_values=self.dates,</div>
<div class="line"><span class="lineno">  226</span>                y_values=logDfs</div>
<div class="line"><span class="lineno">  227</span>            )</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>            <span class="comment"># log P(0,t)</span></div>
<div class="line"><span class="lineno">  230</span>            logP_t = interpolator.value(t)</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>            <span class="comment"># log P(0,T)</span></div>
<div class="line"><span class="lineno">  233</span>            logP_T = interpolator.value(T)</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>            P_t = np.exp(logP_t)</div>
<div class="line"><span class="lineno">  236</span>            P_T = np.exp(logP_T)</div>
<div class="line"><span class="lineno">  237</span>            <span class="keywordflow">return</span> (P_T/P_t)</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="ttc" id="aclass_linear_interpolator_1_1_linear_interpolator_html"><div class="ttname"><a href="class_linear_interpolator_1_1_linear_interpolator.html">LinearInterpolator.LinearInterpolator</a></div><div class="ttdef"><b>Definition</b> LinearInterpolator.py:4</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a71e8113eba9987e01cf915e15ea49aca" name="a71e8113eba9987e01cf915e15ea49aca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71e8113eba9987e01cf915e15ea49aca">&#9670;&#160;</a></span>forward()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.forward </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">date&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">date&#160;</td>
          <td class="paramname"><em>T</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">date&#160;</td>
          <td class="paramname"><em>S</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the simply compounded forward rate F(t;T,S) between times T and S, as observed on t. </p>
<div class="fragment"><div class="line"><span class="lineno">  248</span>    <span class="keyword">def </span>forward(self, t:date, T:date, S:date):</div>
<div class="line"><span class="lineno">  249</span>        <span class="keywordflow">return</span> Utils.dfToForward(self.discountFactor(t,T),self.discountFactor(t,S),T,S)</div>
<div class="line"><span class="lineno">  250</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a76f3c03a1da598eed660c09426b0b52e" name="a76f3c03a1da598eed660c09426b0b52e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76f3c03a1da598eed660c09426b0b52e">&#9670;&#160;</a></span>plotDFs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.plotDFs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  128</span>    <span class="keyword">def </span>plotDFs(self):</div>
<div class="line"><span class="lineno">  129</span>        startDate, dates, n = self.dateSetForPlot()</div>
<div class="line"><span class="lineno">  130</span>        discountFactors = [</div>
<div class="line"><span class="lineno">  131</span>            self.discountFactor(startDate, dates[i]) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n)</div>
<div class="line"><span class="lineno">  132</span>        ]</div>
<div class="line"><span class="lineno">  133</span>        Utils.draw(x=dates,y=discountFactors,xlabel=<span class="stringliteral">r&#39;Time $t$&#39;</span>,ylabel=<span class="stringliteral">r&#39;Discount factor $P(0,t)$&#39;</span>,title=<span class="stringliteral">&quot;Discount factor curve&quot;</span>)</div>
<div class="line"><span class="lineno">  134</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9291be9005c72e6b728ad9d318d940f6" name="a9291be9005c72e6b728ad9d318d940f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9291be9005c72e6b728ad9d318d940f6">&#9670;&#160;</a></span>plotForwardCurve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.plotForwardCurve </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  149</span>    <span class="keyword">def </span>plotForwardCurve(self):</div>
<div class="line"><span class="lineno">  150</span>        startDate, dates, n = self.dateSetForPlot()</div>
<div class="line"><span class="lineno">  151</span>        forwardRates = [</div>
<div class="line"><span class="lineno">  152</span>            self.forward(startDate, dates[i], dates[i] + datetime.timedelta(days=365)) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n)</div>
<div class="line"><span class="lineno">  153</span>        ]</div>
<div class="line"><span class="lineno">  154</span>        Utils.draw(x=dates,y=forwardRates,xlabel=<span class="stringliteral">r&#39;Time $t$&#39;</span>,ylabel=<span class="stringliteral">r&#39;Forward $F(0,T,S)$&#39;</span>,title=<span class="stringliteral">&quot;1y Forward curve&quot;</span>)</div>
<div class="line"><span class="lineno">  155</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1aa705ab59a280993818e7baac3bb90b" name="a1aa705ab59a280993818e7baac3bb90b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aa705ab59a280993818e7baac3bb90b">&#9670;&#160;</a></span>plotRates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.plotRates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  135</span>    <span class="keyword">def </span>plotRates(self):</div>
<div class="line"><span class="lineno">  136</span>        startDate, dates, n = self.dateSetForPlot()</div>
<div class="line"><span class="lineno">  137</span>        rates = [</div>
<div class="line"><span class="lineno">  138</span>            self.rate(startDate, dates[i]) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n)</div>
<div class="line"><span class="lineno">  139</span>        ]</div>
<div class="line"><span class="lineno">  140</span>        Utils.draw(x=dates,y=rates,xlabel=<span class="stringliteral">r&#39;Time $t$&#39;</span>,ylabel=<span class="stringliteral">r&#39;Rate $R(0,t)$&#39;</span>,title=<span class="stringliteral">&quot;Rates curve&quot;</span>)</div>
<div class="line"><span class="lineno">  141</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa64973b5d5518c7c813d8458a01a657b" name="aa64973b5d5518c7c813d8458a01a657b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa64973b5d5518c7c813d8458a01a657b">&#9670;&#160;</a></span>plotZeroCouponCurve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.plotZeroCouponCurve </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  142</span>    <span class="keyword">def </span>plotZeroCouponCurve(self):</div>
<div class="line"><span class="lineno">  143</span>        startDate, dates, n = self.dateSetForPlot()</div>
<div class="line"><span class="lineno">  144</span>        zeroCouponRates = [</div>
<div class="line"><span class="lineno">  145</span>            self.zero(startDate, dates[i]) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n)</div>
<div class="line"><span class="lineno">  146</span>        ]</div>
<div class="line"><span class="lineno">  147</span>        Utils.draw(x=dates,y=zeroCouponRates,xlabel=<span class="stringliteral">r&#39;Time $t$&#39;</span>,ylabel=<span class="stringliteral">r&#39;Zero coupon $Y(0,t)$&#39;</span>,title=<span class="stringliteral">&quot;Zero Coupon curve&quot;</span>)</div>
<div class="line"><span class="lineno">  148</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1378f103b8f17eb48cbbe1dfeac9027c" name="a1378f103b8f17eb48cbbe1dfeac9027c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1378f103b8f17eb48cbbe1dfeac9027c">&#9670;&#160;</a></span>rate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.rate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">date&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">date&#160;</td>
          <td class="paramname"><em>T</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the continuous compounded spot rate R(t,T) between times t and T. </p>
<div class="fragment"><div class="line"><span class="lineno">  244</span>    <span class="keyword">def </span>rate(self, t:date, T:date):</div>
<div class="line"><span class="lineno">  245</span>        <span class="keywordflow">return</span> Utils.dfToRate(self.discountFactor(t,T),t,T)</div>
<div class="line"><span class="lineno">  246</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab82602e06a3578c101c6863577d49f19" name="ab82602e06a3578c101c6863577d49f19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab82602e06a3578c101c6863577d49f19">&#9670;&#160;</a></span>zero()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.zero </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">date&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">date&#160;</td>
          <td class="paramname"><em>T</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the annual compounded spot interest rate(zero) Y(t,T) between times t and T. </p>
<div class="fragment"><div class="line"><span class="lineno">  240</span>    <span class="keyword">def </span>zero(self, t:date, T:date):</div>
<div class="line"><span class="lineno">  241</span>        <span class="keywordflow">return</span> Utils.dfToZero(self.discountFactor(t,T),t,T)</div>
<div class="line"><span class="lineno">  242</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad6b485e419c471c3f207de9bf9963cf3" name="ad6b485e419c471c3f207de9bf9963cf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6b485e419c471c3f207de9bf9963cf3">&#9670;&#160;</a></span>dates</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.dates</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa372a53a24dfb7cda90e0e221bf7086c" name="aa372a53a24dfb7cda90e0e221bf7086c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa372a53a24dfb7cda90e0e221bf7086c">&#9670;&#160;</a></span>dfs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.dfs</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a08c9ff5260556a0491e8a9c783842c5d" name="a08c9ff5260556a0491e8a9c783842c5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08c9ff5260556a0491e8a9c783842c5d">&#9670;&#160;</a></span>DiscountingInterpolationMethod</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DiscountingCurve.DiscountingCurve.DiscountingInterpolationMethod</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>market/<a class="el" href="_discounting_curve_8py.html">DiscountingCurve.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_discounting_curve.html">DiscountingCurve</a></li><li class="navelem"><a class="el" href="class_discounting_curve_1_1_discounting_curve.html">DiscountingCurve</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
